---
layout: posts
title: "Ejemplo de mapa interactivo: seismos la Península Ibérica"
author: "Guillem Salazar"
published: false
status: process
draft: false
---

Cargar datos:

```{R}
datos<-read.table("/Users/guillemsalazar/Documents/RqueRblog/files/terremotos.txt",sep="\t",header=T)
datos.red<-datos[which(datos$Mag>5),]
```

Cargar paquete *leaflet*:
```{R}
library(leaflet)
```

Crear mapa:

```{R}
m<-leaflet() %>%
  addTiles() %>%  # Add default OpenStreetMap map tiles
  addCircleMarkers(lng=datos.red$Longitud, lat=datos.red$Latitud)
m
```

Retocar mapa:

1. Establecer el radio de los círculos proporcional a la magnitud
2. Añadir información a los puntos

```{R}
m<-leaflet() %>%
  addTiles() %>%  # Add default OpenStreetMap map tiles
  addCircleMarkers(lng=datos.red$Longitud, lat=datos.red$Latitud,radius=datos.red$Mag)
m
```

```{R}
datos.red<-datos[which(datos$Mag>3),]
datos.red$popup<-paste("Fecha: ",datos.red$Fecha, ", Hora: ",datos.red$Hora,", Magnitud: ",datos.red$Mag,sep="")
```

```{R}
m<-leaflet() %>%
  addTiles() %>%  # Add default OpenStreetMap map tiles
  addProviderTiles("OpenTopoMap", group = "MapQuestOpen.Aerial") %>%
  addCircleMarkers(lng=datos.red$Longitud, lat=datos.red$Latitud,radius=datos.red$Mag,popup=datos.red$popup,stroke=F,color="red",fillOpacity=0.5)
m
```
